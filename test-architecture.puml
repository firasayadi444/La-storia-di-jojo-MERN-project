@startuml Test Architecture - Food Delivery App

!theme plain
skinparam backgroundColor #FFFFFF
skinparam componentStyle rectangle

title Architecture des Tests - Application de Livraison de Nourriture

package "Frontend Testing Architecture" {
    component [Vitest Framework] as Vitest #E8F4FD
    component [@testing-library/react] as RTL #E8F4FD
    component [@testing-library/jest-dom] as JSD #E8F4FD
    component [@testing-library/user-event] as UEvent #E8F4FD
    component [jsdom Environment] as JSDOM #E8F4FD
    
    package "Test Types" {
        component [Unit Tests] as UnitTests #F0F8FF
        component [Component Tests] as CompTests #F0F8FF
        component [Integration Tests] as IntTests #F0F8FF
    }
    
    package "Test Mocks" {
        component [Browser APIs Mock] as BrowserMock #FFF8DC
        component [Storage Mock] as StorageMock #FFF8DC
        component [Fetch Mock] as FetchMock #FFF8DC
        component [Console Mock] as ConsoleMock #FFF8DC
    }
    
    package "React Components" {
        component [UserOrdersHistory] as UOH #FFE4E1
        component [Food Components] as FoodComp #FFE4E1
        component [Order Components] as OrderComp #FFE4E1
        component [Auth Components] as AuthComp #FFE4E1
    }
}

package "Backend Testing Architecture" {
    component [Jest Framework] as Jest #E8F4FD
    component [Supertest] as Supertest #E8F4FD
    component [MongoDB Memory Server] as MongoMem #E8F4FD
    
    package "Test Categories" {
        component [Authentication Tests] as AuthTests #F0F8FF
        component [Food Management Tests] as FoodTests #F0F8FF
        component [Order Management Tests] as OrderTests #F0F8FF
        component [Delivery Tests] as DelTests #F0F8FF
    }
    
    package "API Endpoints" {
        component [Auth Routes] as AuthRoutes #FFE4E1
        component [Food Routes] as FoodRoutes #FFE4E1
        component [Order Routes] as OrderRoutes #FFE4E1
        component [Delivery Routes] as DelRoutes #FFE4E1
    }
    
    package "Database Layer" {
        component [MongoDB Models] as Models #FFF8DC
        component [Test Database] as TestDB #FFF8DC
    }
}

package "Test Configuration" {
    component [Jest Config] as JestConfig #F5F5F5
    component [Vitest Config] as VitestConfig #F5F5F5
    component [Test Setup Files] as SetupFiles #F5F5F5
    component [Coverage Reports] as Coverage #F5F5F5
}

' Frontend Test Relationships
Vitest --> RTL : uses
Vitest --> JSDOM : runs in
RTL --> JSD : extends
RTL --> UEvent : includes
RTL --> UnitTests : executes
RTL --> CompTests : executes
RTL --> IntTests : executes

BrowserMock --> UOH : mocks for
StorageMock --> UOH : mocks for
FetchMock --> UOH : mocks for
ConsoleMock --> UOH : mocks for

UnitTests --> UOH : tests
CompTests --> FoodComp : tests
CompTests --> OrderComp : tests
IntTests --> AuthComp : tests

' Backend Test Relationships
Jest --> Supertest : uses
Jest --> MongoMem : uses
Supertest --> AuthRoutes : tests
Supertest --> FoodRoutes : tests
Supertest --> OrderRoutes : tests
Supertest --> DelRoutes : tests

AuthTests --> AuthRoutes : covers
FoodTests --> FoodRoutes : covers
OrderTests --> OrderRoutes : covers
DelTests --> DelRoutes : covers

MongoMem --> TestDB : provides
TestDB --> Models : isolates
Models --> AuthRoutes : supports
Models --> FoodRoutes : supports
Models --> OrderRoutes : supports
Models --> DelRoutes : supports

' Configuration Relationships
JestConfig --> Jest : configures
VitestConfig --> Vitest : configures
SetupFiles --> Jest : initializes
SetupFiles --> Vitest : initializes
Coverage --> Jest : generates
Coverage --> Vitest : generates

' Test Data Flow
note right of Vitest
  **Frontend Test Features:**
  - Component rendering
  - User interactions
  - State management
  - API mocking
  - Browser environment simulation
end note

note right of Jest
  **Backend Test Features:**
  - API endpoint testing
  - Database operations
  - Authentication flows
  - Error handling
  - Integration testing
end note

note bottom of MongoMem
  **MongoDB Memory Server:**
  - In-memory database
  - Isolated test environment
  - Automatic cleanup
  - No external dependencies
end note

@enduml
